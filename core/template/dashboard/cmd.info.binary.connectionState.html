<div class="cmd cmd-widget #history# connectionState pull-left" data-type="info" data-subtype="binary"
	data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#" data-eqLogic_id="#eqLogic_id#">
	<span class="connectionStateIcon"></span>
	<style>
		.connectionState {
			margin-top: 5px;
			position: absolute !important;
			left: 0;
			min-width: 12px !important;
			margin-left: 5px;
		}

		.connectionState i {
			color: var(--eqTitle-color);
			font-size: 12px;
		}
	</style>
	<script>
		jeedom.cmd.update['#id#'] = function (_options) {
			var cmd = $('.cmd[data-cmd_uid=#uid#]');
			cmd.attr('title', '{{Date de valeur}} : ' + _options.valueDate + '<br/>{{Date de collecte}} : ' + _options.collectDate);
			if (_options.display_value == '1') {
				cmd.find('.connectionStateIcon').html('<i class="fa fa-check"></i>');
			} else {
				cmd.find('.connectionStateIcon').html('<i class="fa fa-times"></i>');
			}
		}
		jeedom.cmd.update['#id#']({ display_value: '#state#', valueDate: '#valueDate#', collectDate: '#collectDate#', alertLevel: '#alertLevel#' });

		dest = $('.cmd[data-cmd_id=#id#]').closest('.eqLogic-widget').find('.refresh');
		$('.cmd[data-cmd_id=#id#]').detach().insertBefore(dest);
	</script>
</div>